{"version":3,"sources":["../../../../src/classes/base/math-array.js"],"names":["config","formatValue","equals","isArray","MathArray","Array","clone","constructor","copy","from","arrayOrObject","fromObject","fromArray","array","offset","i","ELEMENTS","check","to","toArray","toObject","toTarget","target","toFloat32Array","Float32Array","toString","formatString","opts","string","printTypes","name","length","exactEquals","negate","lerp","a","b","t","undefined","ai","min","vector","Math","max","clamp","minVector","maxVector","add","vectors","subtract","scale","multiply","sub","setScalar","addScalar","subScalar","multiplyScalar","scalar","divideScalar","clampScalar","multiplyByScalar","elements","debug","validate","Error","valid","Number","isFinite"],"mappings":"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","sourcesContent":["// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {config, formatValue, equals, isArray} from '../../lib/common';\n\nexport default class MathArray extends Array {\n  clone() {\n    return new this.constructor().copy(this);\n  }\n\n  from(arrayOrObject) {\n    return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n  }\n\n  fromArray(array, offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = array[i + offset];\n    }\n    return this.check();\n  }\n\n  to(arrayOrObject) {\n    if (arrayOrObject === this) {\n      return this;\n    }\n    return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n  }\n\n  toTarget(target) {\n    return target ? this.to(target) : this;\n  }\n\n  toArray(array = [], offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      array[offset + i] = this[i];\n    }\n    return array;\n  }\n\n  toFloat32Array() {\n    return new Float32Array(this);\n  }\n\n  toString() {\n    return this.formatString(config);\n  }\n\n  formatString(opts) {\n    let string = '';\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n    }\n    return `${opts.printTypes ? this.constructor.name : ''}[${string}]`;\n  }\n\n  equals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (!equals(this[i], array[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  exactEquals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (this[i] !== array[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  // Modifiers\n\n  negate() {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = -this[i];\n    }\n    return this.check();\n  }\n\n  lerp(a, b, t) {\n    if (t === undefined) {\n      t = b;\n      b = a;\n      a = this; // eslint-disable-line\n    }\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const ai = a[i];\n      this[i] = ai + t * (b[i] - ai);\n    }\n    return this.check();\n  }\n\n  min(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(vector[i], this[i]);\n    }\n    return this.check();\n  }\n\n  max(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.max(vector[i], this[i]);\n    }\n    return this.check();\n  }\n\n  clamp(minVector, maxVector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n    }\n    return this.check();\n  }\n\n  add(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += vector[i];\n      }\n    }\n    return this.check();\n  }\n\n  subtract(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] -= vector[i];\n      }\n    }\n    return this.check();\n  }\n\n  scale(scale) {\n    if (Array.isArray(scale)) {\n      return this.multiply(scale);\n    }\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scale;\n    }\n    return this.check();\n  }\n\n  // three.js compatibility\n\n  sub(a) {\n    return this.subtract(a);\n  }\n\n  setScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = a;\n    }\n    return this.check();\n  }\n\n  addScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] += a;\n    }\n    return this.check();\n  }\n\n  subScalar(a) {\n    return this.addScalar(-a);\n  }\n\n  multiplyScalar(scalar) {\n    // Multiplies all elements\n    // `Matrix4.scale` only scales its 3x3 \"minor\"\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scalar;\n    }\n    return this.check();\n  }\n\n  divideScalar(a) {\n    return this.scale(1 / a);\n  }\n\n  clampScalar(min, max) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], min), max);\n    }\n    return this.check();\n  }\n\n  // Cesium compatibility\n\n  multiplyByScalar(scalar) {\n    return this.scale(scalar);\n  }\n\n  // THREE.js compatibility\n  get elements() {\n    return this;\n  }\n\n  // Debug checks\n\n  check() {\n    if (config.debug && !this.validate(this)) {\n      throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);\n    }\n    return this;\n  }\n\n  validate() {\n    let valid = this.length === this.ELEMENTS;\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      valid = valid && Number.isFinite(this[i]);\n    }\n    return valid;\n  }\n}\n"],"file":"math-array.js"}