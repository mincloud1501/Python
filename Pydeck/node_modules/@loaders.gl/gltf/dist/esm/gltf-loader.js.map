{"version":3,"sources":["../../src/gltf-loader.js"],"names":["parseGLTFSync","parseGLTF","GLTFParser","defaultOptions","gltf","parserVersion","uri","name","extensions","mimeType","text","binary","test","parse","parseSync","arrayBuffer","options","context","useGLTFParser","gltfParser","byteOffset"],"mappings":";;;;;;;;AAEA,SAAQA,aAAR,EAAuBC,SAAvB,QAAuC,kBAAvC;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AAEA,IAAMC,cAAc,GAAG;AACrBC,EAAAA,IAAI,EAAE;AACJC,IAAAA,aAAa,EAAE;AADX,GADe;AAIrBC,EAAAA,GAAG,EAAE;AAJgB,CAAvB;AAOA,eAAe;AACbC,EAAAA,IAAI,EAAE,MADO;AAEbC,EAAAA,UAAU,EAAE,CAAC,MAAD,EAAS,KAAT,CAFC;AAIbC,EAAAA,QAAQ,EAAE,iBAJG;AAKbC,EAAAA,IAAI,EAAE,IALO;AAMbC,EAAAA,MAAM,EAAE,IANK;AAObC,EAAAA,IAAI,EAAE,MAPO;AAQbC,EAAAA,KAAK,EAALA,KARa;AASbC,EAAAA,SAAS,EAATA,SATa;AAUbX,EAAAA,cAAc,EAAdA;AAVa,CAAf;AAaA,gBAAsBU,KAAtB;AAAA;AAAA;;;sDAAO,iBAAqBE,WAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAkCC,YAAAA,OAAlC,2DAA4C,EAA5C;AAAgDC,YAAAA,OAAhD;AAELD,YAAAA,OAAO,qBAAOb,cAAP,MAA0Ba,OAA1B,CAAP;;AAFK,kBAKDA,OAAO,CAACZ,IAAR,CAAaC,aAAb,KAA+B,CAA/B,IAAoCW,OAAO,CAACE,aAAR,KAA0B,KAL7D;AAAA;AAAA;AAAA;;AAMGC,YAAAA,UANH,GAMgB,IAAIjB,UAAJ,EANhB;AAAA,6CAOIiB,UAAU,CAACN,KAAX,CAAiBE,WAAjB,EAA8BC,OAA9B,CAPJ;;AAAA;AAAA,wBAUoBA,OAVpB,mCAUEI,UAVF,EAUEA,UAVF,qCAUe,CAVf;AAWChB,YAAAA,IAXD,GAWQ,EAXR;AAAA;AAAA,mBAYQH,SAAS,CAACG,IAAD,EAAOW,WAAP,EAAoBK,UAApB,EAAgCJ,OAAhC,EAAyCC,OAAzC,CAZjB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAeP,OAAO,SAASH,SAAT,CAAmBC,WAAnB,EAAuD;AAAA,MAAvBC,OAAuB,uEAAb,EAAa;AAAA,MAATC,OAAS;AAE5DD,EAAAA,OAAO,qBAAOb,cAAP,MAA0Ba,OAA1B,CAAP;;AAGA,MAAIA,OAAO,CAACZ,IAAR,CAAaC,aAAb,KAA+B,CAA/B,IAAoCW,OAAO,CAACE,aAAR,KAA0B,KAAlE,EAAyE;AACvE,WAAO,IAAIhB,UAAJ,GAAiBY,SAAjB,CAA2BC,WAA3B,EAAwCC,OAAxC,CAAP;AACD;;AAP2D,iBAUnCA,OAVmC;AAAA,qCAUrDI,UAVqD;AAAA,MAUrDA,UAVqD,oCAUxC,CAVwC;AAW5D,MAAMhB,IAAI,GAAG,EAAb;AACA,SAAOJ,aAAa,CAACI,IAAD,EAAOW,WAAP,EAAoBK,UAApB,EAAgCJ,OAAhC,EAAyCC,OAAzC,CAApB;AACD","sourcesContent":["// Binary container format for glTF\n\nimport {parseGLTFSync, parseGLTF} from './lib/parse-gltf';\nimport GLTFParser from './lib/deprecated/gltf-parser';\n\nconst defaultOptions = {\n  gltf: {\n    parserVersion: 1 // the new parser that will be the only option in V2.\n  },\n  uri: '' // base URI\n};\n\nexport default {\n  name: 'glTF',\n  extensions: ['gltf', 'glb'],\n  // mimeType: 'model/gltf-binary',\n  mimeType: 'model/gltf+json',\n  text: true,\n  binary: true,\n  test: 'glTF',\n  parse,\n  parseSync, // Less features when parsing synchronously\n  defaultOptions\n};\n\nexport async function parse(arrayBuffer, options = {}, context) {\n  // Apps like to call the parse method directly so apply default options here\n  options = {...defaultOptions, ...options};\n\n  // Deprecated v1 Parser: Returns `GLTFParser` instance, instead of \"pure\" js object\n  if (options.gltf.parserVersion !== 2 && options.useGLTFParser !== false) {\n    const gltfParser = new GLTFParser();\n    return gltfParser.parse(arrayBuffer, options);\n  }\n\n  const {byteOffset = 0} = options;\n  const gltf = {};\n  return await parseGLTF(gltf, arrayBuffer, byteOffset, options, context);\n}\n\nexport function parseSync(arrayBuffer, options = {}, context) {\n  // Apps like to call the parse method directly so apply default options here\n  options = {...defaultOptions, ...options};\n\n  // Deprecated: Return GLTFParser instance\n  if (options.gltf.parserVersion !== 2 && options.useGLTFParser !== false) {\n    return new GLTFParser().parseSync(arrayBuffer, options);\n  }\n\n  // Return pure javascript object\n  const {byteOffset = 0} = options;\n  const gltf = {};\n  return parseGLTFSync(gltf, arrayBuffer, byteOffset, options, context);\n}\n"],"file":"gltf-loader.js"}