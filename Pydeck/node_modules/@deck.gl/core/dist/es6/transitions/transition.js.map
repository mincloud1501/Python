{"version":3,"sources":["../../../src/transitions/transition.js"],"names":["noop","DEFAULT_SETTINGS","onStart","onUpdate","onInterrupt","onEnd","Transition","constructor","timeline","_inProgress","_handle","settings","inProgress","start","props","cancel","Object","assign","addChannel","delay","getTime","duration","end","removeChannel","update","time","_onUpdate","isFinished"],"mappings":"AAAA,SAASA,IAAT,GAAgB,CAAE;;AAElB,MAAMC,gBAAgB,GAAG;AACvBC,EAAAA,OAAO,EAAEF,IADc;AAEvBG,EAAAA,QAAQ,EAAEH,IAFa;AAGvBI,EAAAA,WAAW,EAAEJ,IAHU;AAIvBK,EAAAA,KAAK,EAAEL;AAJgB,CAAzB;AAOA,eAAe,MAAMM,UAAN,CAAiB;AAI9BC,EAAAA,WAAW,CAACC,QAAD,EAAW;AACpB,SAAKC,WAAL,GAAmB,KAAnB;AACA,SAAKC,OAAL,GAAe,IAAf;AACA,SAAKF,QAAL,GAAgBA,QAAhB;AAGA,SAAKG,QAAL,GAAgB,EAAhB;AACD;;AAGD,MAAIC,UAAJ,GAAiB;AACf,WAAO,KAAKH,WAAZ;AACD;;AAMDI,EAAAA,KAAK,CAACC,KAAD,EAAQ;AACX,SAAKC,MAAL;AACA,SAAKJ,QAAL,GAAgBK,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBhB,gBAAlB,EAAoCa,KAApC,CAAhB;AACA,SAAKL,WAAL,GAAmB,IAAnB;AAEA,UAAM;AAACD,MAAAA,QAAD;AAAWG,MAAAA;AAAX,QAAuB,IAA7B;AACA,SAAKD,OAAL,GAAeF,QAAQ,CAACU,UAAT,CAAoB;AACjCC,MAAAA,KAAK,EAAEX,QAAQ,CAACY,OAAT,EAD0B;AAEjCC,MAAAA,QAAQ,EAAEV,QAAQ,CAACU;AAFc,KAApB,CAAf;AAIAV,IAAAA,QAAQ,CAACT,OAAT,CAAiB,IAAjB;AACD;;AAKDoB,EAAAA,GAAG,GAAG;AACJ,QAAI,KAAKb,WAAT,EAAsB;AACpB,WAAKD,QAAL,CAAce,aAAd,CAA4B,KAAKb,OAAjC;AACA,WAAKA,OAAL,GAAe,IAAf;AACA,WAAKD,WAAL,GAAmB,KAAnB;AACA,WAAKE,QAAL,CAAcN,KAAd,CAAoB,IAApB;AACD;AACF;;AAKDU,EAAAA,MAAM,GAAG;AACP,QAAI,KAAKN,WAAT,EAAsB;AACpB,WAAKE,QAAL,CAAcP,WAAd,CAA0B,IAA1B;AACA,WAAKI,QAAL,CAAce,aAAd,CAA4B,KAAKb,OAAjC;AACA,WAAKA,OAAL,GAAe,IAAf;AACA,WAAKD,WAAL,GAAmB,KAAnB;AACD;AACF;;AAKDe,EAAAA,MAAM,GAAG;AACP,QAAI,CAAC,KAAKf,WAAV,EAAuB;AACrB,aAAO,KAAP;AACD;;AAED,SAAKgB,IAAL,GAAY,KAAKjB,QAAL,CAAcY,OAAd,CAAsB,KAAKV,OAA3B,CAAZ;;AAEA,SAAKgB,SAAL;;AAEA,SAAKf,QAAL,CAAcR,QAAd,CAAuB,IAAvB;;AAIA,QAAI,KAAKK,QAAL,CAAcmB,UAAd,CAAyB,KAAKjB,OAA9B,CAAJ,EAA4C;AAC1C,WAAKY,GAAL;AACD;;AACD,WAAO,IAAP;AACD;;AAIDI,EAAAA,SAAS,GAAG,CAEX;;AArF6B","sourcesContent":["function noop() {}\n\nconst DEFAULT_SETTINGS = {\n  onStart: noop,\n  onUpdate: noop,\n  onInterrupt: noop,\n  onEnd: noop\n};\n\nexport default class Transition {\n  /**\n   * @params timeline {Timeline}\n   */\n  constructor(timeline) {\n    this._inProgress = false;\n    this._handle = null;\n    this.timeline = timeline;\n\n    // Defaults\n    this.settings = {};\n  }\n\n  /* Public API */\n  get inProgress() {\n    return this._inProgress;\n  }\n\n  /**\n   * (re)start this transition.\n   * @params props {object} - optional overriding props. see constructor\n   */\n  start(props) {\n    this.cancel();\n    this.settings = Object.assign({}, DEFAULT_SETTINGS, props);\n    this._inProgress = true;\n\n    const {timeline, settings} = this;\n    this._handle = timeline.addChannel({\n      delay: timeline.getTime(),\n      duration: settings.duration\n    });\n    settings.onStart(this);\n  }\n\n  /**\n   * end this transition if it is in progress.\n   */\n  end() {\n    if (this._inProgress) {\n      this.timeline.removeChannel(this._handle);\n      this._handle = null;\n      this._inProgress = false;\n      this.settings.onEnd(this);\n    }\n  }\n\n  /**\n   * cancel this transition if it is in progress.\n   */\n  cancel() {\n    if (this._inProgress) {\n      this.settings.onInterrupt(this);\n      this.timeline.removeChannel(this._handle);\n      this._handle = null;\n      this._inProgress = false;\n    }\n  }\n\n  /**\n   * update this transition. Returns `true` if updated.\n   */\n  update() {\n    if (!this._inProgress) {\n      return false;\n    }\n\n    this.time = this.timeline.getTime(this._handle);\n    // Call subclass method\n    this._onUpdate();\n    // Call user callback\n    this.settings.onUpdate(this);\n\n    // This only works if `settings.duration` is set\n    // Spring transition must call `end` manually\n    if (this.timeline.isFinished(this._handle)) {\n      this.end();\n    }\n    return true;\n  }\n\n  /* Private API */\n\n  _onUpdate() {\n    // for subclass override\n  }\n}\n"],"file":"transition.js"}